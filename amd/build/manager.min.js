define ("mod_coursecertificate/manager",["core/ajax","core/notification","core/templates","core/str"],function(a,b,c,d){var i={AUTOMATICSENDREGION:"[data-region='automaticsend-alert']",REPORTREGION:"[data-region='issues-report']",TOGGLEAUTOMATICSEND:"[data-action='toggle-automaticsend']",REVOKEISSUE:"[data-action='revoke-issue']",RECEIVEISSUE:"[data-action='receive-issue']",LOADING:".loading-overlay"},j={AUTOMATICSENDALERT:"mod_coursecertificate/automaticsend_alert",ISSUESREPORT:"mod_coursecertificate/issues_report"},k={UPDATEAUTOMATICSEND:"mod_coursecertificate_update_automaticsend",REVOKEISSUE:"tool_certificate_revoke_issue",RECEIVEISSUE:"mod_coursecertificate_receive_issue"};function e(a,b){if(b){a.querySelector(i.LOADING).classList.remove("invisible")}else{a.querySelector(i.LOADING).classList.add("invisible")}}function f(f){M.util.js_pending("mod_coursecertificate_toggle_automaticsend");var g=f.querySelector(i.TOGGLEAUTOMATICSEND).dataset,h=g.certificateid,l=g.automaticsend,m="0"===l,n=m?[{key:"confirmation",component:"admin"},{key:"enableautomaticsend",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}]:[{key:"confirmation",component:"admin"},{key:"disableautomaticsend",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}];d.get_strings(n).then(function(d){b.confirm(d[0],d[1],d[2],d[3],function(){e(f,!0);a.call([{methodname:k.UPDATEAUTOMATICSEND,args:{id:h,automaticsend:m}}])[0].then(function(){return c.render(j.AUTOMATICSENDALERT,{certificateid:h,automaticsend:m},"")}).then(function(a){f.innerHTML=a;M.util.js_complete("mod_coursecertificate_toggle_automaticsend");return null}).fail(b.exception)});return null}).fail(b.exception)}function g(c){M.util.js_pending("mod_coursecertificate_revoke_issue");d.get_strings([{key:"confirmation",component:"admin"},{key:"revokeissue",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}]).then(function(d){b.confirm(d[0],d[1],d[2],d[3],function(){a.call([{methodname:k.REVOKEISSUE,args:{id:c}}])[0].then(function(){M.util.js_complete("mod_coursecertificate_revoke_issue");window.location.reload();return null}).fail(b.exception)});return null}).fail(b.exception)}function h(c){M.util.js_pending("mod_coursecertificate_receive_issue");d.get_strings([{key:"confirmation",component:"admin"},{key:"receivecertificatenotification",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}]).then(function(d){b.confirm(d[0],d[1],d[2],d[3],function(){a.call([{methodname:k.RECEIVEISSUE,args:{id:c}}])[0].then(function(){M.util.js_complete("mod_coursecertificate_receive_issue");window.location.reload();return null}).fail(b.exception)});return null}).fail(b.exception)}return{init:function init(){var a=document.querySelector(i.AUTOMATICSENDREGION);if(a){a.addEventListener("click",function(b){if(b.target&&b.target.closest(i.TOGGLEAUTOMATICSEND)){b.preventDefault();f(a)}})}var b=document.querySelector(i.REPORTREGION);if(b){b.addEventListener("click",function(a){var b=a.target&&a.target.closest(i.REVOKEISSUE);if(b){a.preventDefault();var c=b.dataset.issueid;g(c)}})}var c=document.querySelector(i.RECEIVEISSUE);if(c){c.addEventListener("click",function(a){a.preventDefault();var b=a.target.dataset.certificateid;h(b)})}}}});
//# sourceMappingURL=manager.min.js.map
